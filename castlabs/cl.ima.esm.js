import {clpp} from "./cl.core.esm.js";let g={};var _ = clpp._;var f=function(window){var uy="clpp.ima.AdsManagerFactory",vy=function(){this.a=this.c=this.b=null},wy=function(){return!window.google||!google.ima||!google.ima.AdsLoader},xy=function(){},yy=function(a){this.a=a},X=function(a,b,c){this.a=a;this.b=a.getAdPodInfo();this.f=b;this.c=c},Ay=function(a){this.b=a;this.h=a.getSurface().H();a=this.b.getConfiguration();this.G=_.C.lb(a.ima||{});this.B=this.b.Hb("ima").ic();this.D=this.b.Hb("ima").c;this.f=this.b.Hb("ima").a;this.w=new _.gn;this.K=new _.H("clpp.ima");this.g=this.a=
null;this.c=new _.nj;this.A=!1;this.u=new _.ii;this.L=new zy;this.i=null;this.m=this.o=this.l=!1;this.j=null;a=this.u;var b=google.ima.AdErrorEvent.Type.AD_ERROR;a.one(this.f,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.Bi.bind(this));a.on(this.f,b,this.Ai.bind(this));a.one(this.h,_.zc,this.Ii.bind(this))},By=function(a){var b=a.a,c=a.u,d=google.ima.AdEvent.Type;c.on(b,d.LOADED,a.Wg.bind(a));c.on(b,d.CONTENT_PAUSE_REQUESTED,a.Ji.bind(a));c.on(b,d.STARTED,a.Yg.bind(a));c.on(b,d.LOG,
a.ui.bind(a));c.on(b,d.AD_PROGRESS,a.yi.bind(a));c.on(b,d.AD_BUFFERING,a.ri.bind(a));c.on(b,d.FIRST_QUARTILE,a.Ug.bind(a));c.on(b,d.MIDPOINT,a.vi.bind(a));c.on(b,d.THIRD_QUARTILE,a.Zg.bind(a));c.on(b,d.PAUSED,a.xi.bind(a));c.on(b,d.RESUMED,a.zi.bind(a));c.on(b,d.CLICK,a.Tg.bind(a));c.on(b,d.SKIPPED,a.Xg.bind(a));c.on(b,d.IMPRESSION,a.Vg.bind(a));c.on(b,d.COMPLETE,a.si.bind(a));c.on(b,d.CONTENT_RESUME_REQUESTED,a.Ki.bind(a))},Cy=function(a){a=a.G;var b=new google.ima.AdsRenderingSettings;b.restoreCustomPlaybackStateOnAdBreakComplete=
!1;typeof a.bitrate===_.Zc&&(b.bitrate=a.bitrate);b.enablePreloading=typeof a.enablePreloading===_.Ub?a.enablePreloading:!0;typeof a.loadVideoTimeout===_.Zc&&(b.loadVideoTimeout=a.loadVideoTimeout);Array.isArray(a.mimeTypes)&&(b.mimeTypes=a.mimeTypes);typeof a.playAdsAfterTime===_.Zc&&(b.playAdsAfterTime=a.playAdsAfterTime);typeof a.useStyledLinearAds===_.Ub&&(b.useStyledLinearAds=a.useStyledLinearAds);b.uiElements=Array.isArray(a.uiElements)?a.uiElements:[];return b},Ey=function(a){a.i=null;Dy(a,
_.ub);var b=a.b.getSurface();_.yf(a.B,b.a.css.hidden)},Fy=function(a){_.Af(a.h,{visibility:"visible"})},Dy=function(a,b,c){c=c&&c.getAd();var d=null;c&&(d={ad:new X(c,a.l,a.o)});a.b.trigger(new _.O(b,d))},Gy=function(a,b){var c=b?a.L.create(b.getErrorCode()):null;a.b.onError(new _.J(1,9,10003,{errorType:c},b))},Iy=function(a){var b,c;return _.A(function(d){if(1==d.a)return a.D.initialize(),b=!!a.b.getConfiguration().muted,_.x(d,a.w.canPlay(b),2);c=d.b;if(!c)return Dy(a,_.Sb),a.K.warn(_.ha),d["return"]();
Hy(a);_.y(d)})},Jy=function(a,b){return _.A(function(c){if(1==c.a)return a.D.initialize(),_.x(c,b.play(),2);Hy(a);_.y(c)})},Hy=function(a){a.a.init(a.h.offsetWidth,a.h.offsetHeight,google.ima.ViewMode.NORMAL);a.a.start();a.A=!0},zy=function(){},Ky=function(){this.a=new _.H(uy)};_.w(vy,_.fo);_.r=vy.prototype;
_.r.onPlayerCreated=function(a){if(wy())return a.onError(new _.J(1,9,1E4));this.b=_.wf(_.qc,{"class":"clpp-ima clpp-hidden"});a.getSurface().uc(this.b);this.c=new google.ima.AdDisplayContainer(this.b,a.getSurface().H());this.a=new google.ima.AdsLoader(this.c);this.a.getSettings().setPlayerType(_.ka);this.a.getSettings().setPlayerVersion(_.da);this.a.getSettings().setAutoPlayAdBreaks(!0)};
_.r.onPlayerWillDestroy=function(a){this.a&&(this.a.destroy(),this.a=null);this.c&&(this.c.destroy(),this.c=null);this.b&&(a.getSurface().me(this.b),this.b=null)};_.r.Wh=function(){return this.a};_.r.Uh=function(){return this.c};_.r.ic=function(){return this.b};_.r.id=function(){return"ima"};_.B("clpp.ima.ImaPlugin",vy);vy.prototype.getAdContainer=vy.prototype.ic;vy.prototype.getAdDisplayContainer=vy.prototype.Uh;vy.prototype.getAdsLoader=vy.prototype.Wh;vy.Id="ima";vy.isSdkMissing=wy;
xy.prototype.create=function(){return new vy};_.xn(new xy);yy.prototype.getCuePoints=function(){return this.a};yy.prototype.qb=function(){return 0<=this.a.indexOf(0)||0===this.a.length};yy.prototype.ab=function(){return 0<=this.a.indexOf(-1)};yy.prototype.hasPostroll=yy.prototype.ab;yy.prototype.hasPreroll=yy.prototype.qb;yy.prototype.getCuePoints=yy.prototype.getCuePoints;_.r=X.prototype;_.r.Ta=function(){return"Google IMA SDK"};_.r.Ua=function(){return google.ima.VERSION};_.r.$a=function(){return 0};_.r.Va=function(){return this.a.getAdId()};_.r.getCreativeId=function(){return this.a.getCreativeId()};_.r.getApiFramework=function(){return this.a.getApiFramework()};_.r.getAdSystem=function(){return this.a.getAdSystem()};_.r.getAdvertiserName=function(){return this.a.getAdvertiserName()};_.r.getTitle=function(){return this.a.getTitle()};_.r.getDuration=function(){return this.a.getDuration()};
_.r.getSkipTimeOffset=function(){return this.a.getSkipTimeOffset()};_.r.Lb=function(){return this.b?this.b.getIsBumper():!1};_.r.nb=function(){var a=this,b=null,c=this.a,d=Object.keys(c).filter(function(e){return a.a.hasOwnProperty(e)}).find(function(e){return typeof c[e]===_.$c&&typeof c[e].clickThroughUrl===_.Fd});d&&(b=c[d].clickThroughUrl);return b};_.r.getMediaUrl=function(){return this.a.getMediaUrl()};_.r.Xa=function(){return this.a.getVastMediaWidth()};_.r.Wa=function(){return this.a.getVastMediaHeight()};
_.r.Ja=function(){return this.a.getVastMediaBitrate()};_.r.Aa=function(){return this.c?2:this.f?1:0};_.r.getPodIndex=function(){return this.b?this.b.getPodIndex():0};_.r.ob=function(){return this.b?this.b.getTimeOffset():0};_.r.pb=function(){return this.b?this.b.getAdPosition():1};_.r.Za=function(){return this.b?this.b.getTotalAds():1};_.r.getWrapperAdIds=function(){return this.a.getWrapperAdIds()};_.r.getWrapperAdSystems=function(){return this.a.getWrapperAdSystems()};_.r.getWrapperCreativeIds=function(){return this.a.getWrapperCreativeIds()};
X.prototype.getWrapperCreativeIds=X.prototype.getWrapperCreativeIds;X.prototype.getWrapperAdSystems=X.prototype.getWrapperAdSystems;X.prototype.getWrapperAdIds=X.prototype.getWrapperAdIds;X.prototype.getSequenceLength=X.prototype.Za;X.prototype.getPositionInSequence=X.prototype.pb;X.prototype.getPodTimeOffset=X.prototype.ob;X.prototype.getPodIndex=X.prototype.getPodIndex;X.prototype.getPodType=X.prototype.Aa;X.prototype.getMediaBitrate=X.prototype.Ja;X.prototype.getMediaHeight=X.prototype.Wa;
X.prototype.getMediaWidth=X.prototype.Xa;X.prototype.getMediaUrl=X.prototype.getMediaUrl;X.prototype.getClickThroughUrl=X.prototype.nb;X.prototype.isBumper=X.prototype.Lb;X.prototype.getSkipTimeOffset=X.prototype.getSkipTimeOffset;X.prototype.getDuration=X.prototype.getDuration;X.prototype.getTitle=X.prototype.getTitle;X.prototype.getAdvertiserName=X.prototype.getAdvertiserName;X.prototype.getAdSystem=X.prototype.getAdSystem;X.prototype.getApiFramework=X.prototype.getApiFramework;
X.prototype.getCreativeId=X.prototype.getCreativeId;X.prototype.getId=X.prototype.Va;X.prototype.getTechnology=X.prototype.$a;X.prototype.getAdManagerVersion=X.prototype.Ua;X.prototype.getAdManagerName=X.prototype.Ta;_.r=Ay.prototype;_.r.Bi=function(a){var b=this;this.a=a.getAdsManager(this.h,Cy(this));this.g=new _.an(this.b.getSurface(),function(c,d,e){b.a.resize(c,d,e?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)});a=this.a.getCuePoints();this.j=new yy(a);this.b.trigger(new _.O(_.yb,{adsTimeline:this.j}));By(this);this.c.resolve()};_.r.Ai=function(a){Gy(this,a.getError());this.c.resolve()};_.r.Ji=function(a){this.m=!0;this.b.pause();_.Af(this.h,{visibility:_.Fc});Dy(this,_.db,a);this.g.start()};
_.r.Wg=function(a){a.getAd().isLinear()?Dy(this,_.mb,a):(this.a.discardAdBreak(),this.l||(this.l=!0,this.b.play()))};_.r.Yg=function(a){this.i=a.getAd().getDuration();Dy(this,_.tb,a);a=this.b.getSurface();_.zf(this.B,a.a.css.hidden)};_.r.ui=function(a){a=a.getAdData();Gy(this,a?a.adError:null);Ey(this)};_.r.yi=function(a){Dy(this,_.pb,a)};_.r.ri=function(a){Dy(this,_.fb,a)};_.r.Ug=function(a){Dy(this,_.jb,a)};_.r.vi=function(a){Dy(this,_.nb,a)};_.r.Zg=function(a){Dy(this,_.vb,a)};
_.r.xi=function(a){Dy(this,_.ob,a)};_.r.zi=function(a){Dy(this,_.qb,a)};_.r.Tg=function(a){this.pause();Dy(this,_.gb,a)};_.r.Xg=function(a){Dy(this,_.sb,a);Ey(this)};_.r.Vg=function(a){Dy(this,_.lb,a)};_.r.si=function(a){Dy(this,_.ib,a);Ey(this)};_.r.Ki=function(){this.l=!0;if(!this.m)return this.b.play();this.m=!1;this.g.stop();this.b.isEnded()||this.b.play();Dy(this,_.eb);Fy(this)};_.r.Ii=function(){this.o=!0;this.f.contentComplete()};
_.r.load=function(){var a=this,b,c,d,e,f;return _.A(function(g){if(1==g.a){b=a.b;c=a.G;try{if(typeof c.adTagUrl!==_.Fd)throw new _.J(1,9,10001,{missingKeys:"adTagUrl"});}catch(h){return b.onError(h),a.c.resolve(),g["return"](a.c)}return c.adTagUrl?_.x(g,a.w.canPlay(!1),2):(a.c.resolve(),g["return"](a.c))}if(3!=g.a)return d=g.b,_.x(g,a.w.canPlay(!0),3);e=g.b;f=new google.ima.AdsRequest;f.adTagUrl=c.adTagUrl;f.setAdWillAutoPlay(d);f.setAdWillPlayMuted(e);a.f.requestAds(f);return g["return"](a.c)})};
_.r.start=function(a){var b=this;return _.A(function(c){return b.a&&b.j&&!b.A?b.j.qb()?_.x(c,Iy(b),0):_.x(c,Jy(b,a),0):_.x(c,a.play(),0)})};_.r.resume=function(){this.a&&this.a.resume()};_.r.pause=function(){this.a&&this.a.pause()};_.r.skip=function(){this.a&&this.a.skip()};_.r.getVolume=function(){return this.a?this.a.getVolume():1};_.r.setVolume=function(a){this.a&&this.a.setVolume(a)};
_.r.getPosition=function(){if(!this.a||null===this.i)return-1;var a=this.a.getRemainingTime();return 0>a?0:this.i-a};_.r.dispose=function(){Fy(this);this.u.release();this.g&&(this.g.stop(),this.g=null);this.a&&(this.a.destroy(),this.a=null);this.f&&!this.o&&this.f.contentComplete()};Ay.prototype.getPosition=Ay.prototype.getPosition;Ay.prototype.setVolume=Ay.prototype.setVolume;Ay.prototype.getVolume=Ay.prototype.getVolume;Ay.prototype.skip=Ay.prototype.skip;Ay.prototype.pause=Ay.prototype.pause;
Ay.prototype.resume=Ay.prototype.resume;zy.prototype.create=function(a){var b=google.ima.AdError.ErrorCode;switch(a){case b.VAST_LOAD_TIMEOUT:case b.VAST_MEDIA_LOAD_TIMEOUT:case b.FAILED_TO_REQUEST_ADS:return 0;case b.VIDEO_PLAY_ERROR:return 1;default:return 2}};Ky.prototype.name=function(){return uy};Ky.prototype.O=function(a,b){return a.namespace()===_.dc?!1:wy()?(this.a.warn("IMA SDK is not loaded."),!1):!(!b||!b.ima)};Ky.prototype.create=function(a){return new Ay(a)};Ky.prototype.create=Ky.prototype.create;Ky.prototype.isSupported=Ky.prototype.O;Ky.prototype.name=Ky.prototype.name;_.bo(new Ky);};f.call(g, window);