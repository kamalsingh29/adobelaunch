(function(){var g={}; var _ = _ || {};
var f=function(window){var PD=function(a){this.b=a;this.a=new _.ii;this.c=!1},QD=function(a){this.a=a;this.b=_.Zh()},RD=function(){this.f=!1;this.b=this.c=this.a=this.g=null},SD=function(a,b){a.a&&(a.a.stopStreamingSession(b),a.a.detachPlayer(),a.a.release(),a.a=null)},TD=function(){return!window.SmartLib},UD=function(){};_.r=PD.prototype;_.r.init=function(){var a=this.b,b=this.a;b.on(a,_.Dd,this.sg.bind(this));b.on(a,_.Tb,this.qg.bind(this));b.on(a,"seek",this.rg.bind(this))};
_.r.qg=function(a){a=a.detail;if(typeof a.bandwidth===_.Zc)PlayerEventListener.onLayerSwitch(a.bandwidth/1E3)};_.r.sg=function(a){var b=this.b;a=a.detail;var c=a.currentState;if(a.previousState===_.Cn)PlayerEventListener.onStallEnd(!b.isPaused());if(c===_.Cn)PlayerEventListener.onStallStart();else if(c===_.ln)if(this.c)PlayerEventListener.onSessionResume();else PlayerEventListener.onSessionStart(),this.c=!0;else if(c===_.Kn)PlayerEventListener.onSessionPause()};
_.r.rg=function(){var a=1E3*this.b.getPosition();PlayerEventListener.onSeek(a)};_.r.release=function(){this.a&&(_.li(this.a),this.a=null)};_.r=QD.prototype;_.r.getPlayerName=function(){return _.ka};_.r.getVersion=function(){return _.da};_.r.getOSName=function(){return this.b.os};_.r.getDeviceVersion=function(){return this.b.osVersion.name};_.r.getDeviceType=function(){return"browser"};_.r.getTotalDuration=function(){return this.a.isLive()?0:1E3*this.a.getDuration()};_.r.getCurrentPosition=function(){return 1E3*this.a.getPosition()};_.r.getCurrentBitrate=function(){var a=this.a.getStats();return(a?a.streamBandwidth:0)/1E3};_.w(RD,_.fo);_.r=RD.prototype;_.r.onPlayerCreated=function(a){this.g=a};
_.r.onContentWillLoad=function(a,b){var c=a.getConfiguration().broadpeak;if(c){if(TD())return a.onError(new _.J(1,9,11E3));this.f=!0;this.c=new _.nj;var d=c.analyticsAddress||null,e=c.nanoCDNHost||null,f=c.broadpeakDomainNames||"",g=c.uuid||null;c=c.customParameters||{};this.a=SmartLib.getInstance();this.a.init(d,e,f);typeof g===_.Fd&&this.a.setUUID(g);for(var h in c)c.hasOwnProperty(h)&&this.a.setCustomParameter(h,c[h]);this.b=new PD(a);this.b.init();this.a.attachPlayer(new QD(a));this.a.getURL(b.url,
this.$i.bind(this,b),this.aj.bind(this));return this.c}};_.r.$i=function(a,b){a.url=b;this.c.resolve()};_.r.aj=function(a,b){this.g.onError(new _.J(1,9,11001,{message:b}));SD(this,SmartLib.BPUnspecifiedError);this.c.resolve()};_.r.onPlayerWillRelease=function(){this.f&&(this.b&&(this.b.release(),this.b=null),SD(this,SmartLib.BPSessionEndsNormally));this.f=!1};_.r.id=function(){return"broadpeak"};_.B("clpp.broadpeak.BroadpeakPlugin",RD);RD.Id="broadpeak";RD.isSdkMissing=TD;UD.prototype.create=function(){return new RD};
_.xn(new UD);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.min.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core.min"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();
