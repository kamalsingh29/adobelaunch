(function(){var g={}; var _ = _ || {};
var f=function(window){/*

 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var Ly="BANDWIDTH",My="CLOSED-CAPTIONS",Ny="EXT-X-BYTERANGE",Oy="EXT-X-ENDLIST",Py="EXT-X-MEDIA-SEQUENCE",Qy="EXT-X-PLAYLIST-TYPE",Ry="EXT-X-STREAM-INF",Sy="EXT-X-TARGETDURATION",Ty="GROUP-ID",Uy="Guessing audio-only",Vy="SUBTITLES",Wy="URI",Xy=function(a,b){var c=new _.Je(new _.Fe(b));_.re&&(0,_.re)(c,a.prototype);return c},Yy=function(a,b){b=void 0===b?0:b;return b+10<=a.length&&73===a[b]&&68===a[b+1]&&51===a[b+2]&&255>a[b+3]&&255>a[b+4]&&128>a[b+6]&&128>a[b+7]&&128>a[b+8]&&128>a[b+9]?!0:!1},Zy=
function(a,b,c,d){this.c=a;this.type=b;this.a=c;this.b=d||null},$y=function(a,b,c,d){this.id=a;this.name=b;this.a=c;this.value=void 0===d?null:d},az=function(a,b){this.name=a;this.value=b},bz=function(a,b,c){return(a=a.getAttribute(b))?a.value:c||null},cz=function(a,b){var c=a.getAttribute(b);if(!c)throw new _.J(_.K,4,4023,b);return c.value},dz=function(a,b){this.b=b;this.a=a},ez=function(){this.a=0},lz=function(a,b,c){b=_.hf(b);b=b.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var d=b.split(/\n+/m);
if(!/^#EXTM3U($|[ \t\n])/m.test(d[0]))throw new _.J(_.K,4,4015);b=0;for(var e=!0,f=_.u(d),g=f.next();!g.done;g=f.next())if(g=g.value,g=g.trim(),!g.length||fz.Wd(g)||e)e=!1;else if(g=gz(a,g),--a.a,hz.includes(g.name)){b=1;break}else g.name==Ry&&(e=!0);f=[];e=!0;g=_.u(iz(d));for(var h=g.next();!h.done;h=g.next()){var l=h.value;h=l.jf;var m=l.item;l=l.next;m=m.trim();if(!m.length||fz.Wd(m)||e)e=!1;else{m=gz(a,m);if(jz.includes(m.name)){if(1!=b)throw new _.J(_.K,4,4017);d=d.splice(h,d.length-h);a=kz(a,
c,d,f);return new Zy(c,b,f,a)}f.push(m);m.name==Ry&&(m.a.push(new az(Wy,l)),e=!0)}}return new Zy(c,b,f)},kz=function(a,b,c,d){var e=[],f=[];c.forEach(function(g){/^(#EXT)/.test(g)?(g=gz(a,g),hz.includes(g.name)?d.push(g):f.push(g)):fz.Wd(g)||(g=fz.Zc(b,g.trim()),e.push(new dz(g,f)),f=[])});return e},gz=function(a,b){var c=a.a++,d=b.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!d)throw new _.J(_.K,4,4016,{invalidTag:b});var e=d[1],f=d[2];d=[];var g;if(f){f=new _.mg(f);var h;(h=_.ng(f,/^([^,=]+)(?:,|$)/g))&&
(g=h[1]);for(var l=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;h=_.ng(f,l);)d.push(new az(h[1],h[2]||h[3]))}return new $y(c,e,d,g)},oz=function(){var a=this;this.f=this.g=null;this.$=1;this.j=new Map;this.V=new Set;this.b=new Map;this.c=null;this.m="";this.D=new ez;this.T=0;this.l=new _.Hf(function(){mz(a)});this.h=nz;this.A=null;this.K=0;this.L=Infinity;this.o=new _.Ej;this.S=[];this.B=new Map;this.w=!1;this.i=new Map;this.G=null;this.a=new _.H("clpp.hls.HlsParser");this.u=new Map},tz=function(a,b){var c,
d,e,f,g,h,l,m,n,p,q;return _.A(function(t){if(1==t.a)return c=fz,d=pz,e=b.Xf,_.x(t,qz(a,e),2);if(3!=t.a){f=t.b;g=lz(a.D,f.data,f.uri);if(1!=g.type)throw new _.J(_.K,4,4017);l=(h=c.Gb(g.a,Py))?Number(h.value):0;m=b.stream;return _.x(t,rz(a,b.td,g,l,m.type,m.mimeType,m.codecs,m.keyInfo),3)}n=t.b;b.yb.replace(n);p=n[n.length-1];if(q=c.Gb(g.a,Oy))sz(a,d.VOD),a.c.Ab(p.endTime);_.y(t)})},xz=function(a,b){var c,d,e,f,g,h,l,m,n,p,q,t,v,z,F,E,D,L,R,oa,Da;return _.A(function(Ua){if(1==Ua.a){c=lz(a.D,b,a.m);
if(1===c.type){a.u.set(a.m,c);d=c.b[0].a;e=_.al;f=new _.rj(d);g=f.ga.split(".").pop();h=uz[e.AUDIO][g];l=uz[e.VIDEO][g];m=[];l&&m.push("avc1.42E01E");h&&m.push("mp4a.40.2");var Ka=a.D,Ob=a.m,xb=m.join(","),La=[],Va=[];Va.push(new az(Ly,"0"));Va.push(new az(Wy,Ob));xb.length&&Va.push(new az("CODECS",xb));La.push(new $y(Ka.a++,Ry,Va));c=new Zy(Ob,0,La)}return _.x(Ua,vz(a,c.a),2)}n=Ua.b;if(!a.g)throw new _.J(_.K,7,7001);a.g.filterAllPeriods([n]);p=Infinity;q=0;t=Infinity;v=_.u(a.b.values());for(z=v.next();!z.done;z=
v.next())F=z.value,p=Math.min(p,F.ae),q=Math.max(q,F.ae),F.stream.type!=_.k&&(t=Math.min(t,F.duration));a.h!=nz?(a.c=new _.On(0,3*a.K,!0),a.c.b=!1):(a.c=new _.On(null,0,!0),a.c.b=!0);wz(a);if(a.h!=nz){a.T=a.L;E=pz;a.h!==E.LIVE||isNaN(a.f.availabilityWindowOverride)||(a.c.Sb=a.f.availabilityWindowOverride);for(D=0;95443.7176888889<=q;)D+=95443.7176888889,q-=95443.7176888889;if(D)for(a.a.debug("Offsetting live streams by",D,"to compensate for rollover"),L=_.u(a.b.values()),z=L.next();!z.done;z=L.next())R=
z.value,95443.7176888889>R.ae?(a.a.debug("Offset applied to",R.stream.type),R.stream.presentationTimeOffset=-D,R.yb.offset(D)):a.a.debug("Offset NOT applied to",R.stream.type)}else for(a.c.Ab(t),a.c.offset(-p),oa=_.u(a.b.values()),z=oa.next();!z.done;z=oa.next())Da=z.value,Da.stream.presentationTimeOffset=p,Da.yb.offset(-p),_.Wn(Da.yb,t);a.A={presentationTimeline:a.c,periods:[n],offlineSessionIds:[],minBufferTime:0};_.y(Ua)})},vz=function(a,b){var c,d,e,f,g;return _.A(function(h){switch(h.a){case 1:c=
fz;d=c.zc(b,"EXT-X-MEDIA");e=c.zc(b,Ry);for(var l=_.u(e),m=l.next();!m.done;m=l.next()){var n=m.value,p=bz(n,"AUDIO");m=bz(n,"VIDEO");var q=bz(n,Vy);n=yz(a,n);if(q){var t=zz(_.k,n);a.i.set(q,t);_.yg(n,t)}p&&(q=Az(_.Nb,n),a.i.set(p,q));m&&(p=Az(_.Xd,n),a.i.set(m,p))}return _.x(h,Bz(a,d),2);case 2:l=fz.af(d,My);l=_.u(l);for(m=l.next();!m.done;m=l.next())m=m.value,p=bz(m,"LANGUAGE")||_.Od,p=_.dn(p),q=cz(m,Ty),m=cz(m,"INSTREAM-ID"),a.B.get(q)||a.B.set(q,new Map),a.B.get(q).set(m,p);return _.x(h,Cz(a,
e),3);case 3:return f=h.b,_.x(h,Dz(a,d),4);case 4:return g=h.b,h["return"]({startTime:0,variants:f,textStreams:g,thumbStreams:[]})}})},Dz=function(a,b){var c,d,e,f,g,h,l,m,n,p,q,t;return _.A(function(v){if(1==v.a)return c=fz.af(b,Vy),d=c.map(function(z){var F,E;return _.A(function(D){if(1==D.a)return _.Ce(D,2),_.x(D,Ez(a,z),4);if(2!=D.a)return F=D.b,D["return"](F.stream);E=_.Ee(D);throw E;})}),_.x(v,Promise.all(d),2);e=v.b;f=_.u(c);for(g=f.next();!g.done;g=f.next())if(h=g.value,l=cz(h,Ty),m=a.i.get(l))if(n=
a.j.get(l))for(p=_.u(n),q=p.next();!q.done;q=p.next())t=q.value,t.stream.codecs=m;return v["return"](e.filter(function(z){return z}))})},Bz=function(a,b){var c;return _.A(function(d){if(1==d.a)return b=b.filter(function(e){var f=bz(e,Wy)||"";return bz(e,"TYPE")!==Vy&&""!==f}),b.length?_.x(d,Ez(a,b[0]),2):d.C(2);c=b.slice(1).map(function(e){return Ez(a,e)});return _.x(d,Promise.all(c),0)})},Cz=function(a,b){var c,d,e,f,g,h,l;return _.A(function(m){if(1==m.a)return c=_.Lk,b.sort(function(n,p){var q=
Number(cz(n,Ly)),t=Number(cz(p,Ly));return q-t}),d=function(n){var p,q,t,v,z,F,E;return _.A(function(D){return 1==D.a?(p=bz(n,"FRAME-RATE"),q=Number(cz(n,Ly)),t=bz(n,"RESOLUTION"),v=_.u(t?t.split("x"):[null,null]),z=v.next().value,F=v.next().value,_.x(D,Fz(a,n,t,p),2)):(E=D.b)?D["return"](Gz(a,E.audio,E.video,q,z,F,p)):D["return"]([])})},_.x(m,d(b[0]),2);if(3!=m.a){e=m.b;f=[];for(g=1;g<b.length;g++)f.push(d(b[g]));return _.x(m,Promise.all(f),3)}h=m.b;l=h.reduce(c.Hd,e);l=l.filter(function(n){return null!=
n});return m["return"](l)})},Fz=function(a,b,c,d){var e,f,g,h,l,m,n,p,q,t,v,z,F,E;return _.A(function(D){if(1==D.a)return e=_.al,f=yz(a,b),g=bz(b,"AUDIO"),h=bz(b,"VIDEO"),m=(l=g||h)&&a.j.has(l)?a.j.get(l):[],n={audio:g?m:[],video:h?m:[]},a.a.debug("Guessing stream type for",b.toString()),q=!1,t=cz(b,Wy),v=n.audio.find(function(L){return L.td===t}),z=zz(e.VIDEO,f),F=c||d||z,1!==f.length||F?!m.length&&1<f.length?(a.a.debug("Guessing multiplexed audio+video"),p=e.VIDEO,f=[f.join(",")]):n.audio.length&&
v?(a.a.debug(Uy),p=e.AUDIO,q=!0):n.video.length?(a.a.debug(Uy),p=e.AUDIO):(a.a.debug("Guessing video-only"),p=e.VIDEO):(p=e.AUDIO,a.a.debug(Uy)),q?D.C(2):_.x(D,Hz(a,b,f,p),3);2!=D.a&&(E=D.b);if(E)n[E.stream.type]=[E];else if(null===E)return a.a.debug("streamInfo is null"),D["return"](null);Iz(n);return D["return"](n)})},Iz=function(a){a=_.u(a.audio.concat(a.video));for(var b=a.next();!b.done;b=a.next()){b=b.value;var c=b.stream.codecs.split(",");c=c.filter(function(d){return"mp4a.40.34"!=d});b.stream.codecs=
c.join(",")}},Gz=function(a,b,c,d,e,f,g){c.forEach(function(F){if(F=F.stream)F.width=Number(e)||void 0,F.height=Number(f)||void 0,F.frameRate=Number(g)||void 0});b.length||(b=[null]);c.length||(c=[null]);var h=[];b=_.u(b);for(var l=b.next();!l.done;l=b.next()){l=l.value;for(var m=_.u(c),n=m.next();!n.done;n=m.next()){var p=n.value;n=l?l.stream:null;var q=p?p.stream:null,t=l?l.drmInfos:null,v=p?p.drmInfos:null;p=(p?p.td:"")+" - "+(l?l.td:"");var z=void 0;if(n&&q)if(_.Kk(t,v))z=_.Jk(t,v);else{a.a.warn("Incompatible DRM info in HLS variant.  Skipping.");
continue}else n?z=t:q&&(z=v);a.V.has(p)?a.a.debug("Skipping variant which only differs in text streams."):(n=Jz(a,n,q,d,z),h.push(n),a.V.add(p))}}return h},Jz=function(a,b,c,d,e){return{id:a.$++,language:b?b.language:_.Od,primary:!!b&&b.primary||!!c&&c.primary,audio:b,video:c,bandwidth:d,drmInfos:e,allowedByApplication:!0,allowedByKeySystem:!0}},Ez=function(a,b){var c,d,e,f,g,h,l,m,n,p,q,t,v;return _.A(function(z){if(1==z.a){c=cz(b,Ty);d="";e=cz(b,"TYPE").toLowerCase();f=_.al;e==_.Id&&(e=f.TEXT);
e!==f.TEXT&&c&&a.i.has(c)&&(d=a.i.get(c));g=cz(b,Wy);if(a.b.has(g))return z["return"](a.b.get(g));h=_.dn(bz(b,"LANGUAGE",_.Od));l=bz(b,"NAME");m=b.getAttribute("DEFAULT");n=b.getAttribute("AUTOSELECT");p=bz(b,"CHANNELS");q=e==_.Nb?p?parseInt(p.split("/")[0],10):null:null;t=!!m&&!!n;return _.x(z,Kz(a,g,d,e,h,t,l,q,null),2)}v=z.b;if(null==v)return z["return"](null);a.j.has(c)?a.j.get(c).push(v):a.j.set(c,[v]);if(a.b.has(g))return z["return"](a.b.get(g));a.b.set(g,v);return z["return"](v)})},yz=function(a,
b){var c=bz(b,"CODECS","avc1.42E01E,mp4a.40.2").split(/\s*,\s*/),d=new Set,e=[];c=_.u(c);for(var f=c.next();!f.done;f=c.next()){f=f.value;var g=_.ig(f)[0];d.has(g)?a.a.debug("Ignoring duplicate codec"):(e.push(f),d.add(g))}return e},Hz=function(a,b,c,d){var e,f,g,h,l,m;return _.A(function(n){if(1==n.a){e=_.al;f=cz(b,Wy);if(a.b.has(f))return n["return"](a.b.get(f));g=bz(b,My);h=null;d==e.VIDEO&&g&&"NONE"!=g&&(h=a.B.get(g));l=Az(d,c);return _.x(n,Kz(a,f,l,d,_.Od,!1,null,null,h),2)}m=n.b;if(null==m)return n["return"](null);
if(a.b.has(f))return n["return"](a.b.get(f));a.b.set(f,m);return n["return"](m)})},Kz=function(a,b,c,d,e,f,g,h,l){var m,n,p,q,t,v,z,F,E,D,L,R,oa,Da,Ua,Ka,Ob,xb,La,Va,rb,Qb,hb,kb,Gb,xd,Wa,Ue,zo,jw;return _.A(function(yd){switch(yd.a){case 1:m=fz;n=m.Zc(a.m,b);if(a.h==nz&&a.u.has(n)){p=a.u.get(n);a.u["delete"](n);yd.C(2);break}return _.x(yd,qz(a,n),3);case 3:t=yd.b,n=t.uri,p=lz(a.D,t.data,n);case 2:if(1!=p.type)throw new _.J(_.K,4,4017);v=[];p.b.forEach(function(Ao){Ao=m.zc(Ao.b,"EXT-X-KEY");v.push.apply(v,
Ao)});z=!1;F=[];E=null;D=_.u(v);for(L=D.next();!L.done;L=D.next())R=L.value,oa=cz(R,"METHOD"),Da=bz(R,"KEYFORMAT","identity"),"NONE"!=oa&&("AES-128"==oa?(Ua=bz(R,"IV",""),Ka=m.Zc(a.m,cz(R,Wy)),q={method:"AES-128",url:Ka,iv:Ua?_.Xj((Ua||"0x").slice(2)):null},a.w=!0):(z=!0,(xb=(Ob=Lz[Da])?Ob(R):null)?(xb.keyIds.length&&(E=xb.keyIds[0]),F.push(xb)):a.a.warn("Unsupported HLS KEYFORMAT",Da)));if(z&&!F.length&&!a.w)throw new _.J(_.K,4,4026);Mz(a,p);return _.x(yd,Nz(a,d,c,p),4);case 4:return Va=La=yd.b,
Qb=(rb=m.Gb(p.a,Py))?Number(rb.value):0,_.x(yd,rz(a,b,p,Qb,d,Va,c,q),5);case 5:return hb=yd.b,kb=hb[0].startTime,Gb=hb[hb.length-1].endTime,xd=Gb-kb,Wa=new _.Un(hb),Ue=Oz(p,q),zo=void 0,d==_.k&&(zo=_.Hd),jw={id:a.$++,originalId:g,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:Wa.find.bind(Wa),getSegmentReference:Wa.get.bind(Wa),adjustSegmentDurations:Wa.bc.bind(Wa),getDuration:Wa.getDuration.bind(Wa),initSegmentReference:Ue,presentationTimeOffset:0,mimeType:Va,codecs:c,kind:zo,
encrypted:z,keyId:E,language:e,label:g,type:d,primary:f,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:h,closedCaptions:l,keyInfo:q},yd["return"]({stream:jw,yb:Wa,drmInfos:F,td:b,Xf:n,ae:kb,$j:Gb,duration:xd})}})},Mz=function(a,b){var c=fz.Gb(b.a,Qy),d=fz.Gb(b.a,Oy);d=c&&"VOD"==c.value||d;c=c&&"EVENT"==c.value&&!d;c=!d&&!c;d?sz(a,nz):(c?sz(a,Pz):sz(a,Qz),d=Rz(b.a,Sy),d=Number(d.value),a.K=Math.max(d,a.K),a.L=Math.min(d,
a.L))},Oz=function(a,b){var c=fz.zc(a.a,"EXT-X-MAP");if(!c.length)return null;if(1<c.length)throw new _.J(_.K,4,4020);var d=c[0];c=cz(d,Wy);var e=fz.Zc(a.c,c);c=0;var f=null;if(d=bz(d,"BYTERANGE"))c=d.split("@"),d=Number(c[0]),c=Number(c[1]),f=c+d-1;return new _.Mn(function(){return[e]},c,f,b)},Sz=function(a,b,c,d,e){var f=b.b,g=b.a;b=Rz(f,"EXTINF").value.split(",");b=d+Number(b[0]);var h=0,l=null;if(f=fz.Gb(f,Ny))h=f.value.split("@"),f=Number(h[0]),h=h[1]?Number(h[1]):a.ha+1,l=h+f-1;e&&!e.iv&&(e.iv=
_.ak(new Uint8Array(12),new Uint8Array([c>>24&255,c>>16&255,c>>8&255,c&255])));return new _.Nn(c,d,b,function(){return[g]},h,l,e)},wz=function(a){a.c&&(a.S.forEach(function(b){_.Qn(a.c,b,0)}),a.S=[])},rz=function(a,b,c,d,e,f,g,h){var l,m,n,p,q,t,v,z,F,E,D,L;return _.A(function(R){if(1==R.a)return l=c.b,m=[],n=l[0].a,p=Sz(null,l[0],d,0,h||null),q=Oz(c,h||null),_.x(R,Tz(a,b,q,p,e,f,g),2);t=R.b;a.a.debug("First segment",n.split("/").pop(),"starts at",t);for(v=0;v<l.length;++v)z=l[v],F=m[m.length-1],
E=0==v?t:F.endTime,D=d+v,L=Sz(F,z,D,E,h||null),m.push(L);a.S.push(m);wz(a);return R["return"](m)})},Tz=function(a,b,c,d,e,f,g){var h;return _.A(function(l){if(1==l.a){if(null!==a.G)return a.a.debug("Reusing cached start time for",e),l.C(2);h=a;return _.x(l,Uz(a,b,c,d,f,g),3)}2!=l.a&&(h.G=l.b,a.a.debug("Fetched start time for",e));return l["return"](a.G)})},Wz=function(a,b){var c,d,e,f,g,h,l;return _.A(function(m){switch(m.a){case 1:return c=b.a(),d=_.en(b.Ba(),b.ua,b.ua+2048-1,a.f.attemptParameters),
d.type=_.to,e=_.en(b.Ba(),b.ua,b.ha,a.f.attemptParameters),e.type=_.to,c&&(e.keyInfo=c),_.Ce(m,2),f=a.w?e:d,_.x(m,Vz(a,f),4);case 4:return g=m.b,m["return"](g);case 2:h=_.Ee(m);if(7001==h.code||a.w)throw h;a.a.warn("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",d.uris[0]);return _.x(m,Vz(a,e),5);case 5:return l=m.b,m["return"](l)}})},Uz=function(a,b,c,d,e,f){var g,h,l,m,n,p,q,t,v,
z,F;return _.A(function(E){switch(E.a){case 1:if(a.A){g=a.b.get(b);h=g.yb;if(l=h.get(d.position))return a.a.debug("Found segment start time in previous manifest"),E["return"](l.startTime);a.a.debug("Unable to find segment start time in previous manifest!")}a.a.debug("Fetching segment to find start time");if("audio/mpeg"==e)return E["return"](0);if("audio/aac"!=e){E.C(2);break}return _.x(E,Wz(a,d),3);case 3:return m=E.b,n=_.ef(m.data),Yy(n)?E["return"](Xz(n)):E["return"](Yz(m.data));case 2:if(e!=_.Zd&&
e!=_.Pb){E.C(4);break}p=[Wz(a,d)];c&&p.push(Wz(a,c));return _.x(E,Promise.all(p),5);case 5:return q=E.b,t=q[0],v=q[1]||q[0],E["return"](Zz(a,t.data,v.data));case 4:if(e!=_.Yd){E.C(6);break}return _.x(E,Wz(a,d),7);case 7:return z=E.b,E["return"](Yz(z.data));case 6:if("audio/eac3"===e||"audio/ac3"===e)return E["return"](0);F=$z;if(!F(e,f))return E["return"](0);throw new _.J(_.K,4,4030);}})},Zz=function(a,b,c){var d=0;(new _.jh).J("moov",_.kh).J("trak",_.kh).J("mdia",_.kh).X("mdhd",function(g){g.v.skip(0==
g.version?8:16);d=_.eh(g.v);g.hb.stop()}).parse(c,!0);if(!d)throw a.a.error("Unable to find timescale in init segment!"),new _.J(_.K,4,4030);var e=0,f=!1;(new _.jh).J("moof",_.kh).J("traf",_.kh).X("tfdt",function(g){e=(0==g.version?_.eh(g.v):_.gh(g.v))/d;f=!0;g.hb.stop()}).parse(b,!0);if(!f)throw new _.J(_.K,4,4030);return e},Yz=function(a){function b(){d.seek(e+188);f=_.ch(d);71!=f&&(d.seek(e+192),f=_.ch(d));71!=f&&(d.seek(e+204),f=_.ch(d));71!=f&&c();_.ih(d)}function c(){throw new _.J(_.K,4,4030);
}for(var d=new _.$g(new DataView(a),!1),e=0,f=0;;)if(e=d.getPosition(),f=_.ch(d),71!=f&&c(),a=_.dh(d),8191===(a&8191))b();else if(a&16384)if(a=(_.ch(d)&48)>>4,0!=a&&2!=a||c(),3==a&&(a=_.ch(d),d.skip(a)),1!=_.eh(d)>>8)b();else{d.skip(3);a=_.ch(d)>>6;0!=a&&1!=a||c();0==_.ch(d)&&c();a=_.ch(d);var g=_.dh(d),h=_.dh(d);return(1073741824*((a&14)>>1)+((g&65534)<<14|(h&65534)>>1))/9E4}else b()},Xz=function(a){function b(l,m,n){for(var p="";m<n;m++)p+="%"+("00"+l[m].toString(16)).slice(-2);return p}function c(l){return l[0]<<
21|l[1]<<14|l[2]<<7|l[3]}function d(){throw new _.J(_.K,4,4030);}Yy(a)||d();var e=10;a[5]&64&&(e=e+4+c(a.subarray(10,14)));do{var f=c(a.subarray(e+4,e+8));1>f&&d();var g=String.fromCharCode(a[e],a[e+1],a[e+2],a[e+3]);if("PRIV"===g){g=a.subarray(e+10,e+f+10);for(var h=0;h<g.byteLength;h++)if(0===g[h]){if("com.apple.streaming.transportStreamTimestamp"===unescape(b(g,0,h)))return a=g.subarray(h+1),f=(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,f*=4,f+=a[7]&3,Math.round(f/9E4);break}}Yy(a,e)||d();
e+=10;e+=f}while(e<a.byteLength);return d()},zz=function(a,b){for(var c=aA[a],d=0;d<c.length;d++)for(var e=0;e<b.length;e++)if(c[d].test(b[e].trim()))return b[e].trim();return a==_.k?"":null},Az=function(a,b){if(1==b.length)return b[0];var c=zz(a,b);if(null!=c)return c;throw new _.J(_.K,4,4025,{codecList:b});},Nz=function(a,b,c,d){var e,f,g,h,l,m,n,p,q;return _.A(function(t){if(1==t.a){e=_.al;f=d.b[0].a;g=new _.rj(f);h=g.ga.split(".").pop();l=uz[b];if(m=l[h])return t["return"](m);if(b==e.TEXT)return c&&
"vtt"!=c?t["return"](_.Fb):t["return"](_.Kd);n=_.Gi([f],a.f.attemptParameters);n.method="HEAD";n.type=_.to;return _.x(t,Vz(a,n),2)}p=t.b;q=p.headers["content-type"];if(!q)throw new _.J(_.K,4,4021,h);return t["return"](q.split(";")[0])})},Rz=function(a,b){var c=fz.Gb(a,b);if(!c)throw new _.J(_.K,4,4024,{missingTag:b});return c},qz=function(a,b){var c=_.Gi([b],a.f.attemptParameters);c.type=1;return Vz(a,c)},$z=function(a,b){return MediaSource.isTypeSupported((a.split("/")[0]||"")+'/mp4;codecs\x3d"'+
b+'"')},mz=function(a){var b,c,d;_.A(function(e){if(1==e.a){a.a.info(_.ab);if(!a.g)return e["return"]();_.Ce(e,2);return _.x(e,a.update(),4)}if(2!=e.a)return b=a.T,a.l.R(b),_.De(e,0);c=_.Ee(e);a.g&&(a.g.onError(c),d=c,1===d.a&&a.l.R(.1));_.y(e)})},sz=function(a,b){a.h=b;a.c&&(a.c.b=a.h==nz);a.h!=nz||a.l.stop()},Vz=function(a,b){if(!a.o)throw new _.J(_.K,7,7001);var c=a.g.networkingEngine.fetch(b);_.bn(a.o,c);return c.promise},bA=function(){},iz=function cA(a){var c,d,e,f,g,h;return Xy(cA,function(l){1==
l.a&&(c=-1,e=d=void 0,f=_.u(a),g=f.next());if(5!=l.a){if(g.done)return-1===c?l.C(0):_.x(l,{jf:c,mj:d,item:e,next:void 0},0);h=g.value;return 0<=c?_.x(l,{jf:c,item:e,mj:d,next:h},5):l.C(5)}c++;d=e;e=h;g=f.next();return l.C(2)})};$y.prototype.toString=function(){function a(d){return d.name+"\x3d"+(isNaN(Number(d.value))?'"'+d.value+'"':d.value)}var b="#"+this.name,c=this.a?this.a.map(a):[];this.value&&c.unshift(this.value);0<c.length&&(b+=":"+c.join(","));return b};
$y.prototype.getAttribute=function(a){var b=this.a.filter(function(c){return c.name==a});return b.length?b[0]:null};var fz={zc:function(a,b){return a.filter(function(c){return c.name==b})},af:function(a,b){return a.filter(function(c){return cz(c,"TYPE")===b})},Gb:function(a,b){var c=fz.zc(a,b);return c.length?c[0]:null},Xj:function(a,b,c){return a.filter(function(d){var e=d.getAttribute("TYPE");d=d.getAttribute(Ty);return e.value==b&&d.value==c})},Zc:function(a,b){return _.Mk([a],[b])[0]},Wd:function(a){return/^#(?!EXT)/m.test(a)}};var hz=[Sy,Py,"EXT-X-DISCONTINUITY-SEQUENCE",Qy,"EXT-X-MAP","EXT-X-I-FRAMES-ONLY",Oy],jz=["EXTINF",Ny,"EXT-X-DISCONTINUITY","EXT-X-PROGRAM-DATE-TIME","EXT-X-KEY","EXT-X-DATERANGE"];_.r=oz.prototype;_.r.configure=function(a){this.f=a};_.r.start=function(a,b){var c=this,d,e;return _.A(function(f){if(1==f.a)return c.g=b,_.x(f,qz(c,a),2);if(3!=f.a)return d=f.b,c.m=d.uri,_.x(f,xz(c,d.data),3);e=c.T;0<e&&c.l.R(e);return f["return"](c.A)})};_.r.stop=function(){this.l&&(this.l.stop(),this.l=null);var a=[];this.o&&(a.push(this.o.destroy()),this.o=null);this.f=this.g=null;this.V.clear();this.b.clear();this.u.clear();this.A=null;this.j.clear();this.i.clear();return Promise.all(a)};
_.r.update=function(){var a=this,b,c,d;return _.A(function(e){if(1==e.a){if(a.h==nz)return e["return"]();b=[];a.G=null;c=Array.from(a.b.values());return c.length?_.x(e,tz(a,c[0]),2):e.C(2)}for(d=1;d<c.length;++d)b.push(tz(a,c[d]));return _.x(e,Promise.all(b),0)})};_.r.onExpirationUpdated=function(){};
var aA={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},uz={audio:{mp4:_.Pb,m4s:_.Pb,m4i:_.Pb,m4a:_.Pb,cmfa:_.Pb,ts:_.Yd,aac:"audio/aac",ec3:"audio/eac3",ac3:"audio/ac3"},video:{mp4:_.Zd,m4s:_.Zd,m4i:_.Zd,m4v:_.Zd,cmfv:_.Zd,ts:_.Yd},text:{mp4:_.Fb,m4s:_.Fb,m4i:_.Fb,cmft:_.Fb,vtt:_.Kd,ttml:_.Hb}},Lz={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(a){var b=cz(a,"METHOD"),c=["SAMPLE-AES","SAMPLE-AES-CTR",
"SAMPLE-AES-CENC"];if(!c.includes(b))return _.cf("Widevine in HLS is only supported with [",c.join(", "),"], not",b),null;b=cz(a,Wy);b=_.Xi.parse(b);b=_.ef(b.data);b=_.Nk(_.mc,[{initDataType:_.ac,initData:b}]);if(a=bz(a,"KEYID"))b.keyIds=[a.substr(2).toLowerCase()];return b}},nz="VOD",Qz="EVENT",Pz="LIVE",pz={VOD:nz,Jj:Qz,LIVE:Pz};_.w(bA,_.nl);bA.prototype.rb=function(){_.Do.pd("m3u8",oz);_.Do.Hc(_.ul,oz);_.Do.Hc(_.Ib,oz)};bA.prototype.ib=function(){_.Do.ne("m3u8");_.Do.qd(_.ul);_.Do.qd(_.Ib)};bA.prototype.id=function(){return"clpp.component.hls"};_.B("clpp.hls.HlsComponent",bA);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.min.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core.min"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();
